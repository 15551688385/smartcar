<!--
roslaunch autoware_camera_lidar_calibrator camera_lidar_calibration.launch intrinsics_file:=/home/ne0/Desktop/calib_heat_camera1_rear_center_fisheye.yaml compressed_stream:=True camera_id:=camera1
-->
<launch>
    <arg name="image_src" default="/cv_camera/image_raw" />
    <arg name="camera_info_src" default="/camera_info" />
    <arg name="calibration_file" default="$(find calibration)/docs/20190113_1301_smartcar_camera_calibration.yaml"/>
    <arg name="target_frame" default="velodyne"/>
    <arg name="camera_frame" default="camera"/>
    <arg name="projection_matrix_topic" default="/projection_matrix"/>
    <arg name="image_rectifier_out" default="image_rectified"/>

    <node pkg="calibration" type="calibration_pub_node" name="calibration_publisher">      
        <param name="register_lidar2camera_tf" type="bool" value="true"/>
        <param name="publish_extrinsic_mat" type="bool" value="true"/>
        <param name="publish_camera_info" type="bool" value="true"/>
        <param name="image_topic" value="$(arg image_src)"/>
        <param name="camera_info_src" value="$(arg camera_info_src)"/>
        <param name="calibration_file" value="$(arg calibration_file)"/>
        <param name="projection_matrix_topic" value="$(arg projection_matrix_topic)"/>
        <param name="target_frame" type="str" value="$(arg target_frame)"/>
        <param name="camera_frame" type="str" value="$(arg camera_frame)"/> 
    </node>

    <node pkg="image_rectifier" type="image_rectifier_node" name="image_rectifier" output="screen">
        <param name="image_src" value="$(arg image_src)"/>
        <param name="calibration_file" value="$(arg calibration_file)"/>
        <param name="image_rectifier_out" value="$(arg image_rectifier_out)"/>
    </node>

    <!-- <node pkg="image_view" type="image_view" name="image_view" output="screen">
        <remap from="image" to="image_rectified" />
    </node> -->

    <node pkg="calibration" type="camera_lidar_calibration_node" name="camera_lidar_calibration_node" output="screen">
        <param name="image_src" value="/image_rectified" />
        <param name="camera_info_src" value="$(arg camera_info_src)" />
    </node>

</launch>